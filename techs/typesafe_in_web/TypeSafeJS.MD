近年のJavaScriptのアプリケーションがますます複雑になります。

Gmailのような複雑なUI/UXのウェブアプリケーションを作る場合、
部品やデータモデルをちゃんと考えないといけません。

数年前超人気だったJQueryはHTMLを操作するライブラリとして
とても便利ですが、「部品」という概念がないため、時代の流れでだんだん古く技術となります。ソフトウェア世界は変化は常に速いですね。

複雑なUI/UXのウェブアプリケーションを開発ため、
Angular、React、Veu.jsという最新なSPA(Single Page Application)技術が生み出しています。
さらにChromeが事実の標準ブラウザーとなりますので、
新しいのウェブ技術(PWAなど)がどんどん使えるようになります。

本文は、SPAの話つもりなく、
Node.jsの普及によって、JavaScriptがますます重要な地位となり、どうやって安全にプログラミングできる言語「TypeScript」を話したいと思います。

[TypeScript](https://ja.wikipedia.org/wiki/TypeScript)はマイクロソフトが開発された型安全（タイプセーフ）のJavaScriptのスーパーセットのオープンソースプログラミング言語です。ちなみに、C#の作者より設計されました。Visual StudioのIDEにもファーストクラスのプログラミング言語となります。
（マイクロソフトと関わるとあまりオプンな印象ではないですが、
実はMicrosoft社はGitHubを買収後、一気にオプンソースの最大な貢献社となります。）

Google社のAngular（SPAフレームワークの超人気フレームワークの１つ）も利用TypeScript採用ています。

## 型の表現性

型でプログラムが読みやすくなり、安全になります。
JavaやC#の開発者が実感していると思います。

TypeScriptの一番の特徴はやはり型です：

例、マップを利用したい場合：

    const map: Map<string,number[]> = new Map();

で使えるようになります。

一方、JavaScriptの場合 {Key: Value} の活用でマップ使えます:

    const map = {"key": "value"}

しかし実際
`Key`にはstringでも良い、numberでも良い、
`Value`にもObject、配列、値案でも良い。

これは怖いです。システムを実際に動かして、実際の値を見ないと中身がわからないし、いつか変なもの（バグ）が混ぜ込む可能性もあります。

`Map<string,number[]>`はKeyとValueの型が限定され、
予測できない状況を排除します。


# Genericで抽象化

Genericが便利さはJavaやC#の開発者が実感していると思います。
TypeScriptもJava/C#の同様の知識でより抽象化可能です。

例えば

    add(arr: Array<T>, element: T) {}

メソッドで配列に必ず同じな型しか追加できないと約束できます。

一方、JavaScriptでは

    add(arr, element) {}

となり、いつか変なelement（バグ）が混ぜ込む可能性もあります。


## コンパイルエラーでバグ減らす

JavaScriptは自体は動的な言語で、機動性が高いですが、
大きなプロジェクトの場合、
一箇所修正すると、影響された箇所の調査は通常大変です。

例えば型をstringからnumberに変換すると、
全て関連箇所がコンパイルエラーとなり、
影響範囲が一目瞭然です。


## ツールの活躍

Java/C#の開発は変数・メソッドのリネーム一瞬でできます、
理由は一箇所修正だけで、関連の箇所は全てIDEでリネームしてもらえます。

静的な言語だからこそ、安全快速でソースコードの関連性を自動分析可能となります。

その他、例えば自動補足、など色々機能があります。
無料なVisual Studio Codeで十分な開発できると思っています。

## 最後

TypeSriptはJavaScriptのスーパーセットとして存在しますので、
いつでも気軽くに既存のJavaScriptと共存しながら、
移行できるので、ぜひお試しください。

「一旦TypeScriptの良さが体験できると、
もう二度JavaScriptに戻りたくない」と弊社の実感です。

